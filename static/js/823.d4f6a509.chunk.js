"use strict";(self.webpackChunkreact_social_network=self.webpackChunkreact_social_network||[]).push([[823],{8838:function(e,s,n){n.r(s),n.d(s,{default:function(){return D}});var t=n(5671),r=n(3144),o=n(136),i=n(4104),l=n(2791),u=n(8687),c=n(9842),a="UserItem_userItem__2ZGYG",g="UserItem_userItemInner__D9hRa",h="UserItem_itemImage__+-auL",d="UserItem_itemInfo__Lfxh8",f="UserItem_ItemStatus__YkVdZ",p=n.p+"static/media/userPhoto.4ce1ce10ce20ffcefb44.png",I=n(1087),m=n(4569),w=n(184),P=function(e){return(0,w.jsx)("div",{className:a,children:(0,w.jsxs)("div",{className:g,children:[(0,w.jsx)("div",{className:h,children:(0,w.jsx)(I.rU,{to:"/profile/"+e.userId,children:(0,w.jsx)("img",{src:e.userPhoto?e.userPhoto:p,alt:"User Avatar"})})}),(0,w.jsx)("div",{className:d,children:(0,w.jsxs)("div",{children:["Name: ",e.userName]})}),(0,w.jsx)("div",{className:f,children:e.status}),(0,w.jsx)("div",{children:e.followed?(0,w.jsx)("button",{disabled:e.followingInProgress.some((function(s){return s===e.userId})),onClick:function(){e.setIsFetching(!0),e.setFollowingInProgress(!0,e.userId),m.delete("https://social-network.samuraijs.com/api/1.0/follow/".concat(e.userId),{withCredentials:!0,headers:{"API-KEY":"0f7ca0a1-1142-4ef6-a871-38727982b107"}}).then((function(s){0===s.data.resultCode&&e.unfollowSuccess(e.userId),e.setIsFetching(!1),e.setFollowingInProgress(!1,e.userId)}))},children:"Unfollow"}):(0,w.jsx)("button",{disabled:e.followingInProgress.some((function(s){return s===e.userId})),onClick:function(){e.setIsFetching(!0),e.setFollowingInProgress(!0,e.userId),m.post("https://social-network.samuraijs.com/api/1.0/follow/".concat(e.userId),{},{withCredentials:!0,headers:{"API-KEY":"0f7ca0a1-1142-4ef6-a871-38727982b107"}}).then((function(s){0===s.data.resultCode&&e.followSuccess(e.userId),e.setIsFetching(!1),e.setFollowingInProgress(!1,e.userId)}))},children:"Follow"})})]})})},_="Users_users__oN5Ju",F="Users_userItemsRow__TA4od",j="Users_paginationBlock__BGfUr",x=n(885),C="Paginator_currentPage__fDxwj",S="Paginator_prevAndNextBtn__9kSXl",v=function(e){for(var s=e.totalItemsCount,n=e.pageSize,t=e.currentPage,r=e.onPageChanged,o=e.portionSize,i=void 0===o?10:o,u=Math.ceil(s/n),c=Math.ceil(u/i),a=(0,l.useState)(1),g=(0,x.Z)(a,2),h=g[0],d=g[1],f=(h-1)*i+1,p=h*i,I=[],m=1;m<=u;m++)I.push(m);return(0,w.jsxs)(w.Fragment,{children:[h>1&&(0,w.jsx)("button",{className:S,onClick:function(){d(h-1)},children:"Prev"}),I.filter((function(e){return e>=f&&e<=p})).map((function(e){return(0,w.jsx)("div",{children:(0,w.jsx)("button",{onClick:function(s){r(e)},className:t===e?C:"",children:e})},e)})),h<c&&(0,w.jsx)("button",{className:S,onClick:function(){d(h+1)},children:"Next"})]})},k=function(e){return(0,w.jsxs)("div",{className:_,children:[(0,w.jsx)("div",{className:F,children:e.users.map((function(s){return(0,w.jsx)(P,{userId:s.id,userPhoto:s.photos.small,followed:s.followed,userName:s.name,status:s.status,isFetching:e.isFetching,setIsFetching:e.setIsFetching,setFollowingInProgress:e.setFollowingInProgress,followingInProgress:e.followingInProgress,followSuccess:e.followSuccess,unfollowSuccess:e.unfollowSuccess},s.id)}))}),(0,w.jsx)("div",{className:j,children:(0,w.jsx)(v,{currentPage:e.currentPage,totalItemsCount:e.totalItemsCount,pageSize:e.pageSize,onPageChanged:e.onPageChanged,portionSize:10})})]})},N=n(6693),U=n(7781),b=function(e){return e.usersPage.users},z=function(e){return e.usersPage.totalItemsCount},Z=function(e){return e.usersPage.pageSize},A=function(e){return e.usersPage.currentPage},B=function(e){return e.usersPage.isFetching},q=function(e){return e.usersPage.followingInProgress},y=function(e){(0,o.Z)(n,e);var s=(0,i.Z)(n);function n(){var e;(0,t.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=s.call.apply(s,[this].concat(o))).onPageChanged=function(s){e.props.requestUsers(s,e.props.pageSize)},e}return(0,r.Z)(n,[{key:"componentDidMount",value:function(){this.props.requestUsers(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){return(0,w.jsxs)(w.Fragment,{children:[this.props.isFetching?(0,w.jsx)(N.Z,{}):null,(0,w.jsx)(k,{totalItemsCount:this.props.totalItemsCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,users:this.props.users,onPageChanged:this.onPageChanged,isFetching:this.props.isFetching,setIsFetching:this.props.setIsFetching,setFollowingInProgress:this.props.setFollowingInProgress,followingInProgress:this.props.followingInProgress,followSuccess:this.props.followSuccess,unfollowSuccess:this.props.unfollowSuccess})]})}}]),n}(l.Component),D=(0,U.qC)((0,u.$j)((function(e){return{users:b(e),totalItemsCount:z(e),pageSize:Z(e),currentPage:A(e),isFetching:B(e),followingInProgress:q(e)}}),{setIsFetching:c.BB,setFollowingInProgress:c.Vb,requestUsers:c.D7,followSuccess:c.GF,unfollowSuccess:c.VQ}))(y)}}]);
//# sourceMappingURL=823.d4f6a509.chunk.js.map